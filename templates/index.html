{% extends "base.html" %}

{% block content %}


<div class="card info-box">
    <div>ğŸ“… ìµœì‹ í™” ë‚ ì§œ : {{ upload_time }}</div>
    <div>ğŸ“¦ ì „ì²´ ë§¤ë¬¼ ìˆ˜ : {{ properties|length }} ê°œ</div>
</div>

{% if mode == "sale" %}
<h2>ë§¤ë§¤ ë§¤ë¬¼ ëª©ë¡</h2>
{% else %}
<h2>ì›”ì„¸ ë§¤ë¬¼ ëª©ë¡</h2>
{% endif %}

<div class="card">

<form method="get">

    <input type="hidden" name="mode" value="{{ mode }}">

    <div class="filter-row">
        <strong>ë§¤ë¬¼ì¢…ë¥˜ :</strong>

        <select name="property_type" onchange="this.form.submit()">
            <option value="" {% if not property_type %}selected{% endif %}>ì „ì²´</option>
            <option value="ìƒê°€" {% if property_type == 'ìƒê°€' %}selected{% endif %}>ìƒê°€</option>
            <option value="ì‚¬ë¬´ì‹¤" {% if property_type == 'ì‚¬ë¬´ì‹¤' %}selected{% endif %}>ì‚¬ë¬´ì‹¤</option>
            <option value="ì£¼ê±°ìš©" {% if property_type == 'ì£¼ê±°ìš©' %}selected{% endif %}>ì£¼ê±°ìš©</option>
        </select>
    </div>

</form>

<div class="sort-buttons">

    <a href="/?mode={{ mode }}&property_type={{ property_type }}">ê¸°ë³¸ì •ë ¬</a>

    {% if mode == "sale" %}
        <a href="/?mode=sale&sort=sale_asc&property_type={{ property_type }}">ë§¤ë§¤ê°€ â–²</a>
        <a href="/?mode=sale&sort=sale_desc&property_type={{ property_type }}">ë§¤ë§¤ê°€ â–¼</a>
    {% else %}
        <a href="/?mode=rent&sort=rent_asc&property_type={{ property_type }}">ì›”ì„¸ â–²</a>
        <a href="/?mode=rent&sort=rent_desc&property_type={{ property_type }}">ì›”ì„¸ â–¼</a>
    {% endif %}

    <a href="/?mode={{ mode }}&sort=area_asc&property_type={{ property_type }}">í‰ìˆ˜ â–²</a>
    <a href="/?mode={{ mode }}&sort=area_desc&property_type={{ property_type }}">í‰ìˆ˜ â–¼</a>

</div>

</div>


{% for p in properties %}

<div class="card property-card {{ p.property_type }}">

    <div class="card-row">
        <div class="card-left">
            <div class="title">{{ p.building_name }}</div>

            <div class="detail">
                ì¢…ë¥˜ : {{ p.property_type }}
            </div>

            <div class="detail">
                ì „ìš© : {{ p.exclusive_area }}í‰ /
                ê³„ì•½ : {{ p.contract_area }}í‰
            </div>
        </div>

        <div class="card-right">
            <div class="price">
               {% if p.category == "ë§¤ë§¤" %}
                   ë§¤ë§¤ê°€ {{ format_sale_price_korean(p.sale_price) }}
               {% else %}
                   ì„ëŒ€ {{ p.deposit }}/{{ p.rent }}
               {% endif %}
        </div>

        </div>
    </div>

</div>


{% endfor %}

</div>


<style>

/* ===== í•„í„° ì˜ì—­ ===== */

.filter-row{
    margin-bottom:12px;
    font-size:14px;
}

.filter-row select{
    margin-left:8px;
    padding:6px 10px;
    border-radius:8px;
    border:1px solid #d9dee7;
    background:#fff;
    font-size:14px;
    transition:0.15s;
}

.filter-row select:focus{
    outline:none;
    border-color:#2d7ff9;
    box-shadow:0 0 0 2px rgba(45,127,249,0.15);
}

/* ===== ì •ë ¬ ë²„íŠ¼ ì˜ì—­ ===== */

.sort-buttons{
    margin-top:14px;
    padding-top:8px;
    border-top:1px solid #eef1f5;
    display:flex;
    flex-wrap:wrap;
    gap:8px;
}

.sort-buttons a{
    text-decoration:none;
    color:#333;
    background:#f3f5f9;
    padding:7px 12px;
    border-radius:10px;
    font-size:13px;
    font-weight:600;
    transition:0.15s;
}

.sort-buttons a:hover{
    background:#e4ecff;
    color:#2d7ff9;
    transform:translateY(-1px);
}

/* ===== ì¹´ë“œ ê°„ê²© ===== */

.property-card{
    margin-top:14px;
}


/* ê¸°ë³¸ (ì‚¬ë¬´ì‹¤) */
.property-card {
    background: #ffffff;
}

/* ìƒê°€ - ì—°í•œ ë…¹ìƒ‰ */
.property-card.ìƒê°€ {
    background: #e8f7ec;
}

/* ì£¼ê±°ìš© - ì—°í•œ ì£¼í™© */
.property-card.ì£¼ê±°ìš© {
    background: #fff3e6;
}


</style>



{% endblock %}
