{% extends "base.html" %}

{% block content %}

<style>
.menu {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 8px;
    margin-bottom: 15px;
}

.menu a {
    text-align: center;
    padding: 14px 10px;
    background: #2d7ff9;
    color: white;
    border-radius: 10px;
    text-decoration: none;
    font-size: 14px;
    font-weight: bold;
}

.menu a:hover {
    opacity: 0.9;
}

@media (max-width: 600px) {
    .menu {
        grid-template-columns: repeat(2, 1fr);
    }
}
</style>


<div class="container">

<h1>ë¶€ë™ì‚° ì¥ë¶€ ì‹œìŠ¤í…œ</h1>

<div class="menu">
    <a href="/?mode=rent">ì›”ì„¸</a>
    <a href="/?mode=sale">ë§¤ë§¤</a>
    <a href="/search">ê²€ìƒ‰</a>
    <a href="{{ url_for('quick_add') }}">ë§¤ë¬¼ë“±ë¡</a>
    <a href="/excel_upload">ìµœì‹ í™”</a>
    <a href="/collections">ë‚´ ë¦¬ìŠ¤íŠ¸</a>
</div>

<div class="card info-box">
    <div>ğŸ“… ìµœì‹ í™” ë‚ ì§œ : {{ upload_time }}</div>
    <div>ğŸ“¦ ì „ì²´ ë§¤ë¬¼ ìˆ˜ : {{ properties|length }} ê°œ</div>
</div>

{% if mode == "sale" %}
<h2>ë§¤ë§¤ ë§¤ë¬¼ ëª©ë¡</h2>
{% else %}
<h2>ì›”ì„¸ ë§¤ë¬¼ ëª©ë¡</h2>
{% endif %}

<div class="card">

<form method="get">

    <input type="hidden" name="mode" value="{{ mode }}">

    <div class="filter-row">
        <strong>ë§¤ë¬¼ì¢…ë¥˜ :</strong>

        <select name="property_type" onchange="this.form.submit()">
            <option value="" {% if not property_type %}selected{% endif %}>ì „ì²´</option>
            <option value="ìƒê°€" {% if property_type == 'ìƒê°€' %}selected{% endif %}>ìƒê°€</option>
            <option value="ì‚¬ë¬´ì‹¤" {% if property_type == 'ì‚¬ë¬´ì‹¤' %}selected{% endif %}>ì‚¬ë¬´ì‹¤</option>
            <option value="ì£¼ê±°ìš©" {% if property_type == 'ì£¼ê±°ìš©' %}selected{% endif %}>ì£¼ê±°ìš©</option>
        </select>
    </div>

</form>

<div class="sort-buttons">

    <a href="/?mode={{ mode }}&property_type={{ property_type }}">ê¸°ë³¸ì •ë ¬</a>

    {% if mode == "sale" %}
        <a href="/?mode=sale&sort=sale_asc&property_type={{ property_type }}">ë§¤ë§¤ê°€ â–²</a>
        <a href="/?mode=sale&sort=sale_desc&property_type={{ property_type }}">ë§¤ë§¤ê°€ â–¼</a>
    {% else %}
        <a href="/?mode=rent&sort=rent_asc&property_type={{ property_type }}">ì›”ì„¸ â–²</a>
        <a href="/?mode=rent&sort=rent_desc&property_type={{ property_type }}">ì›”ì„¸ â–¼</a>
    {% endif %}

    <a href="/?mode={{ mode }}&sort=area_asc&property_type={{ property_type }}">í‰ìˆ˜ â–²</a>
    <a href="/?mode={{ mode }}&sort=area_desc&property_type={{ property_type }}">í‰ìˆ˜ â–¼</a>

</div>

</div>


{% for p in properties %}

<div class="card property-card">

    <div class="title">
        {{ p.building_name }}
    </div>

    <div class="detail">
        ì¢…ë¥˜ : {{ p.property_type }}
    </div>

    <div class="detail">
        ì „ìš© : {{ p.exclusive_area }}í‰ /
        ê³„ì•½ : {{ p.contract_area }}í‰
    </div>

    {% if mode == "sale" %}
        <div class="price">
            ë§¤ë§¤ê°€ : {{ format_sale_price_korean(p.sale_price) }}
        </div>
    {% else %}
        <div class="price">
            ë³´ì¦ê¸ˆ {{ p.deposit }} / ì›”ì„¸ {{ p.rent }}
        </div>
    {% endif %}

</div>

{% endfor %}

</div>

{% endblock %}
